<html>
<head>
    <title>Publisher Main Page</title>
</head>
<body>
<h2>Publisher Main Page</h2>
<hr/>
<p>Publish an event</p>
    <input type="hidden" id="destination-t" name="destination-key" value="source1-out-0"/><br>
    <label for="inputId">message</label>
    <input id="inputId" type="text" name="key" value="eleven11"/><br>
    <button onclick="httpGet()">send</button>

<br/>
<hr/>

<button id="sendBtnId" onclick="getInfo()" >GET INFO</button>
<div id="info"></div>

<script>
const url = window.location.href;
function httpGet() {
    let destination = document.getElementById('destination-t').value;
    let message = document.getElementById('inputId').value;
    let xmlHttp = new XMLHttpRequest();
    xmlHttp.open( 'GET', url + destination + '/?message=' + message, false ); // false for synchronous request
    xmlHttp.send();
    return xmlHttp.responseText;
}

function getInfo() {
    let xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            let destination = document.getElementById('destination-t').value;
            let message = this.responseText;
            if (message.length === 0) {
                alert("no failed messages in DATA STORE");
            } else {
                let newForm = '<form method="GET" action="' + url + destination + '/" onsubmit="check_form(); return false;">' +
                    'message=<input id="inputId" type="text" name="message" value="' + message + '"/>' +
                    '<button>RE-send</button> ' +
                    '</form>';
                let infoElement = document.getElementById("info");
                console.log("infoElement", infoElement);
                document.getElementById("info").innerHTML = newForm;
                console.log("infoElement", infoElement);
            }
        }
    };
    xhttp.open("GET", url + 'info', true);
    xhttp.send();
}

<!--var intervalID = window.setInterval(getInfo, 2000);-->

// Get the input field
var input = document.getElementById("inputId");

// Execute a function when the user presses a key on the keyboard
input.addEventListener("keypress", function(event) {
  // If the user presses the "Enter" key on the keyboard
  if (event.key === "Enter") {
    // Cancel the default action, if needed
    event.preventDefault();
    // Trigger the button element with a click
    document.getElementById("sendBtnId").click();
  }
});
</script>
</body>
</html>